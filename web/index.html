<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MCP-Auth Gateway Demo UI</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <div class="logo">MCP-Auth Gateway — Demo</div>
        <div class="muted small">本地演示版 · 用于展示 OAuth / 会话 / 调用流程</div>
      </div>
      <div class="row">
        <button onclick="health()" class="secondary">Health</button>
      </div>
    </div>

    <div class="grid">
      <div>
        <div class="card">
          <h3>OAuth 启动 / 回调</h3>
          <div class="field">
            <label>Issuer</label>
            <input id="issuer" value="https://issuer.example/" />
          </div>
          <div class="field">
            <label>Client ID</label>
            <input id="clientId" value="client" />
          </div>
          <div class="field">
            <label>Redirect URI</label>
            <input id="redirect" value="http://localhost:4002/auth/callback" />
          </div>
          <div class="field">
            <label>Server ID (session key)</label>
            <input id="serverId" value="demo-srv" />
          </div>
          <div class="field">
            <label>Scopes (空格分隔)</label>
            <input id="scopes" value="openid profile" />
          </div>
          <div class="row">
            <button onclick="startOauth()">Start OAuth</button>
            <button onclick="simulateCallback()" class="secondary">Simulate Callback</button>
            <button onclick="invokeDemo()" class="secondary">Invoke /invoke</button>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>会话列表</h3>
          <div style="margin-bottom:8px">
            <button onclick="listSessions()">Refresh</button>
          </div>
          <div id="sessionsArea" class="log">No sessions yet</div>
        </div>
      </div>

      <div class="right-col">
        <div class="card">
          <h3>会话详情 / 操作</h3>
          <div class="field">
            <label>Session ID</label>
            <input id="sessionFetchId" placeholder="session id for detail/revoke" />
          </div>
          <div class="row actions">
            <button onclick="getSession()">Get Session</button>
            <button onclick="revokeSession()" style="background:#e53935">Revoke</button>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>响应 / 日志</h3>
          <div id="out" class="log">ready</div>
        </div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
